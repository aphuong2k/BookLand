<div class="page-content bg-white">
    <!-- contact area -->
    <div class="content-block">
        <!-- Browse Jobs -->
        <section class="content-inner bg-white">
            <div class="container">
                <div class="row">
                    <div class="col-xl-3 col-lg-4 m-b30">
                        <div class="sticky-top">
                            <div class="shop-account">
                                <div class="account-detail text-center">
                                    <div class="my-image">
                                        <a href="javascript:void(0);">
                                            <img alt="" src="images/avatar/{{user.avatar}}" class="anhdaidien">
                                        </a>
                                    </div>
                                    <div class="account-title">
                                        <div class="">
                                            <h4 class="m-b5"><a href="javascript:void(0);">{{user.name}}</a></h4>
                                        </div>
                                    </div>
                                    <form action="/profile/upload-image" method="POST" encType="multipart/form-data">
                                        <input type="file" name="avatar" accept="image/*"
                                            style="    margin-top: 10px;padding-left: 30px;width:100%">
                                        <input type="submit" class="btn btn-primary" style="margin-top: 20px;">
                                    </form>
                                </div>
                                {{#each errors}}
                                <div class="alert alert-danger">{{this}}</div>
                                {{/each}}
                                <ul class="account-list">
                                    <li>
                                        <a href="/profile" class="active"><i class="far fa-user" aria-hidden="true"></i>
                                            <span>Profile</span></a>
                                    </li>
                                    <li>
                                        <a href="/list-order"><i class="flaticon-shopping-cart-1" aria-hidden="true"></i>
                                            <span>List Order</span></a>
                                    </li>
                                    <li>
                                        <a href="/profile/address-book"><i class="far fa-id-card"
                                                aria-hidden="true"></i>
                                            <span>Adress Book</span></a>
                                    </li>
                                    <li>
                                        <a href="/user/shop"><i class="fa fa-briefcase" aria-hidden="true"></i>
                                            <span>Shop</span></a>
                                    </li>
                                    <li>
                                        <a href="/profile/change-password"><i class="fa fa-key" aria-hidden="true"></i>
                                            <span>Change Password</span></a>
                                    </li>
                                    <li>
                                        <form action="/auth/logout" method="post">
                                            <button type="submit"
                                                style="    border: none;background: white;width: 100%;text-align: left;"><a
                                                    href=""><i class="fas fa-sign-out-alt" aria-hidden="true"></i>
                                                    <span>Log Out</span></a></button>
                                        </form>

                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-9 col-lg-8 m-b30">
                        <div class="product-description tabs-site-button">
                            <ul class="nav nav-tabs">
                                <li><a data-bs-toggle="tab" href="#graphic-design-1" class="active">To Ship</a>
                                </li>
                                <li><a data-bs-toggle="tab" href="#developement-1">Completed</a></li>
                                <li><a data-bs-toggle="tab" href="#developement-2">Cancelled</a></li>
                            </ul>
                            <div class="tab-content">
                                <div id="graphic-design-1" class="tab-pane show active">
                                    <div class="modal-body">
                                        <div class="table-responsive">
                                            <table class="table "
                                                style="width:100% ; text-align : center ; color:black !important">
                                                <thead>
                                                    <tr>
                                                        <th>Count</th>
                                                        <th>Date Order</th>
                                                        <th>Status</th>
                                                        <th>Total($)</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="myTable">
                                                    {{#each listOrderNow}}
                                                    <tr>
                                                        <td>{{sum @index 1}}</td>
                                                        <td>{{this.create_at}}</td>
                                                        <td></td>
                                                        <input type="hidden" class="status" value="{{this.status}}">
                                                        <td>{{this.total}}</td>
                                                        <td>
                                                            <a href="/list-order/{{this.order_id}}"
                                                                class="btn btn-link"><i class="fa-solid fa-eye"></i></a>
                                                            {{#iff this.status '==' 1}}
                                                            <a href="" class="btn btn-link" data-bs-toggle="modal"
                                                                data-idd="{{../this.order_id}}"
                                                                data-bs-target="#ChangeAddress"><i
                                                                    class="fa fa-exchange"></i></a>

                                                            <a href="" class="btn btn-link" data-bs-toggle="modal"
                                                                data-id="{{../this.order_id}}"
                                                                data-bs-target="#CancelOrder"><i
                                                                    class="fa-solid fa-xmark"></i></a>
                                                            {{/iff}}
                                                            {{#iff this.status '==' 3}}
                                                            <a href="" class="btn btn-link" data-bs-toggle="modal"
                                                                data-id="{{../this.order_id}}"
                                                                data-bs-target="#Complete"><i
                                                                    class="fa-solid fa-check"></i></a>
                                                            {{/iff}}
                                                        </td>
                                                    </tr>
                                                    {{/each}}
                                                </tbody>
                                            </table>
                                        </div>
                                        </p>
                                    </div>
                                </div>
                                <div id="developement-1" class="tab-pane">
                                    <div class="modal-body">
                                        <div class="table-responsive">
                                            <table class="table "
                                                style="width:100% ; text-align : center ; color:black !important">
                                                <thead>
                                                    <tr>
                                                        <th>Count</th>
                                                        <th>Date Order</th>
                                                        <th>Status</th>
                                                        <th>Total($)</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="myTablee">
                                                    {{#each listOrderComplete}}
                                                    <tr>
                                                        <td>{{sum @index 1}}</td>
                                                        <td>{{this.create_at}}</td>
                                                        <td></td>
                                                        <input type="hidden" class="statuss" value="{{this.status}}">
                                                        <td>{{this.total}}</td>
                                                        <td>
                                                            <a href="/list-order/{{this.order_id}}"
                                                                class="btn btn-link"><i class="fa-solid fa-eye"></i>
                                                                </href=>
                                                        </td>
                                                    </tr>
                                                    {{/each}}
                                                </tbody>
                                            </table>
                                        </div>
                                        </p>
                                    </div>
                                </div>
                                <div id="developement-2" class="tab-pane">
                                    <div class="modal-body">
                                        <div class="table-responsive">
                                            <table class="table "
                                                style="width:100% ; text-align : center ; color:black !important">
                                                <thead>
                                                    <tr>
                                                        <th>Count</th>
                                                        <th>Date Order</th>
                                                        <th>Status</th>
                                                        <th>Total($)</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="myTableee">
                                                    {{#each listOrderCancel}}
                                                    <tr>
                                                        <td>{{sum @index 1}}</td>
                                                        <td>{{this.create_at}}</td>
                                                        <td></td>
                                                        <input type="hidden" class="statusss" value="{{this.status}}">
                                                        <td>{{this.total}}</td>
                                                        <td>
                                                            <a href="/list-order/{{this.order_id}}"
                                                                class="btn btn-link"><i class="fa-solid fa-eye"></i>
                                                                </href=>
                                                        </td>
                                                    </tr>
                                                    {{/each}}
                                                </tbody>
                                            </table>
                                        </div>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    <div class="modal fade" id="CancelOrder" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Cancel </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Do you want to cancel this order ?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="cancel">Cancel</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="Complete" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Complete Order </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    Do you want to complete this order ?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="complete">Complete</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade " id="ChangeAddress" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Update Address </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-lg-12 col-md-12">
                            <form action="" name="address-form" method="post">
                                <select id="address" name="address" class="form-control">
                                    {{#each address_default}}
                                    <option value="{{this.account_address_id}}" selected hidden>{{this.name}} |
                                        {{this.phone}} | {{this.content}} | {{this.address}}</option>
                                    {{/each}}
                                    {{#each address}}
                                    <option value="{{this.account_address_id}}">{{this.name}} | {{this.phone}} |
                                        {{this.content}} | {{this.address}}</option>
                                    {{/each}}
                                </select>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="change-btn">Update</button>
                </div>
            </div>
        </div>
    </div>
    </section>
    <!-- Browse Jobs END -->

    <input type="hidden" id="annou" value="{{#each success}}{{this}}{{/each}}">
    <form action="" name="cancel-form" method="post"></form>
</div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var addbtn = document.getElementsByClassName('status');
        console.log(addbtn.length)
        for (var i = 0; i < addbtn.length; i++) {
            if (addbtn[i].value == '1') {
                document.getElementById("myTable").rows[i].cells[2].innerHTML = 'Waiting for order confirmation'
            }
            if (addbtn[i].value == '2') {
                document.getElementById("myTable").rows[i].cells[2].innerHTML = 'Packing'
            }
            if (addbtn[i].value == '3') {
                document.getElementById("myTable").rows[i].cells[2].innerHTML = 'Shipping'
            }
        }
    })
    document.addEventListener('DOMContentLoaded', function () {
        var order_id;
        var cancelbtn = document.getElementById('cancel');
        var changebtn = document.getElementById('change-btn');
        var completebtn = document.getElementById('complete');
        var cancelform = document.forms['cancel-form']
        var addressform = document.forms['address-form']
        $('#ChangeAddress').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget)
            order_id = button.data('idd')
        })
        $('#CancelOrder').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget)
            order_id = button.data('id')
        })
        $('#Complete').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget)
            order_id = button.data('id')
        })
        cancelbtn.onclick = function () {
            //document.getElementById('address-input').value = document.getElementById('address').value
            cancelform.action = '/list-order/cancel/' + order_id;
            cancelform.submit();
        }
        changebtn.onclick = function () {
            addressform.action = '/list-order/update/' + order_id;
            addressform.submit();
        }
        completebtn.onclick = function () {
            cancelform.action = '/list-order/complete/' + order_id;
            cancelform.submit();
        }
        if (document.getElementById("annou").value != '') {
            Swal.fire({
                text: document.getElementById('annou').value,
                icon: 'success',
                timer: 1000,
                showConfirmButton: false,
            }).then(function () {
                window.location = window.location
            })
        }
    })
    document.addEventListener('DOMContentLoaded', function () {
        var addbtnn = document.getElementsByClassName('statuss');
        console.log(addbtnn.length)
        for (var i = 0; i < addbtnn.length; i++) {
            if (addbtnn[i].value == '4') {
                document.getElementById("myTablee").rows[i].cells[2].innerHTML = 'Completed'
            }
        }
    })
    document.addEventListener('DOMContentLoaded', function () {
        var addbtnnn = document.getElementsByClassName('statusss');
        console.log(addbtnnn.length)
        for (var i = 0; i < addbtnnn.length; i++) {
            if (addbtnnn[i].value == '0') {
                document.getElementById("myTableee").rows[i].cells[2].innerHTML = 'Canceled'
            }
        }
    })
</script>