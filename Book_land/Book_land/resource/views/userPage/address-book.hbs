
<div class="page-content bg-white">
		<!-- contact area -->
        <div class="content-block">
			<!-- Browse Jobs -->
			<section class="content-inner bg-white">
				<div class="container">
					<div class="row">
						<div class="col-xl-3 col-lg-4 m-b30">
							<div class="sticky-top">
								<div class="shop-account">
									<div class="account-detail text-center">
										<div class="my-image">
											<a href="javascript:void(0);">
												<img alt="" src="/images/avatar/{{user.avatar}}" class="anhdaidien">											
											</a>
										</div>
										<div class="account-title">
											<div class="">
												<h4 class="m-b5"><a href="javascript:void(0);">{{user.name}}</a></h4>
											</div>
										</div>
										<form action="/profile/upload-image" method="POST" encType="multipart/form-data">
											<input type="file" name="avatar" accept="image/*" style="    margin-top: 10px;padding-left: 30px;width:100%">
											<input type="submit" class="btn btn-primary" style="margin-top: 20px;">
										</form>
									</div>
									{{#each errors}}
										<div class="alert alert-danger">{{this}}</div>
									{{/each}}
									<ul class="account-list">
										<li>
											<a href="/profile" class="active"><i class="far fa-user" aria-hidden="true"></i> 
											<span>Profile</span></a>
										</li>
										<li>
											<a href="/list-order"><i class="flaticon-shopping-cart-1" aria-hidden="true"></i> 
											<span>List Order</span></a>
										</li>
										<li>
											<a href="/profile/address-book"><i class="far fa-id-card" aria-hidden="true"></i> 
											<span>Adress Book</span></a>
										</li>
										<li>
											<a href="/user/shop"><i class="fa fa-briefcase" aria-hidden="true"></i> 
											<span>Shop</span></a>
										</li>
										<li>
											<a href="/profile/change-password"><i class="fa fa-key" aria-hidden="true"></i> 
											<span>Change Password</span></a>
										</li>
										<li>
											<form action="/auth/logout" method="post">
												<button type="submit" style="    border: none;background: white;width: 100%;text-align: left;"><a href=""><i class="fas fa-sign-out-alt" aria-hidden="true"></i> 
											<span>Log Out</span></a></button>
											</form>
										
										</li>
									</ul>
								</div>
							</div>
						</div>
						    <div class="col-xl-9 col-lg-8 m-b30">
                                    {{#each errors_adr}}
                                            <div class="alert alert-danger">{{this}}</div>
                                    {{/each}}
                                    {{#each success}}
                                            <div class="alert alert-success">{{this}}</div>
                                    {{/each}}
									<div class="shop-bx-title clearfix">
										<h5 class="text-uppercase">Address Book</h5>
									</div>
									        <div class="col-lg-12">
                                                <div class="table-responsive">
                                                    <table class="table check-tbl">
                                                        <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th>Name</th>
                                                                <th>Phone</th>
                                                                <th>Content</th>
                                                                <th>Address</th>
                                                                <th>Default</th>
                                                                <th>Action</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            {{#each address}}
                                                            <tr>
                                                                <td >{{sum @index 1}}</td>
                                                                <td >{{this.name}}</td>
                                                                <td >{{this.phone}}</td>
                                                                <td >{{this.content}}</td>
                                                                <td >{{this.address}}</td>
                                                                {{#iff this.default_address '!=' 0}}
                                                                <td>Default</td>
                                                                {{else}}
                                                                <td>Normal</td>
                                                                {{/iff}}
                                                                <td >
                                                                    <a href="" class="btn btn-link" data-bs-toggle="modal" data-id = "{{this.account_address_id}}"data-bs-target="#default"><i class="fa fa-exchange"></i></a>
                                                                    <a href="/profile/address-book/{{this.account_address_id}}" class="btn btn-link"><i class="fa-regular fa-pen-to-square"></i></a>
                                                                    <a href="" class="btn btn-link" data-bs-toggle="modal" data-idd = "{{this.account_address_id}}"data-bs-target="#exampleModal"><i class="fa-solid fa-trash-can"></i></a>
                                                                </td>
                                                            </tr>
                                                            {{/each}}
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
									<button class="btn btn-primary btnhover" data-bs-toggle="modal" data-bs-target="#newAddress">Add New Address</button>		
						    </div>    
						</div>
					</div>
				</div>
			</section>

            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        Do you want to delete this address ?
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="deletebtn">Save changes</button>
                    </div>
                    </div>
                </div>
            </div>

            <div class="modal fade" id="default" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        Do you want to change default address ?
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary" id="defaultbtn">Save changes</button>
                    </div>
                    </div>
                </div>
            </div>

            <div class="modal fade" id="newAddress" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
                    <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Add Address</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                       <form action="/profile/address-book" class="shop-form" method="post">
                            <div class="widget">
                                        <div class="form-group">
                                             <select name="province" id="province" class="form-control">
                                                <option value="-1">Chọn tỉnh thành</option>
                                            </select>	
                                        </div>
                                        <div class="form-group">
                                            <select name="district" id="district" class="form-control">
                                                <option value="-1" >Chọn quận/huyện</option>
                                            </select>	
                                        </div>
                                        <div class="form-group">
                                              <select name="town" id="town" class="form-control">
                                                <option value="-1">Chọn phường/xã</option>
                                              </select>
                                        </div>
                                        <div class="form-group">
                                            <input type="text" name="name" class="form-control" placeholder="Name*" required>
                                        </div>  
                                        <div class="form-group">
                                            <input type="text" name="phone" class="form-control" placeholder="Phone*"required>
                                        </div>
                                        <div class="form-group">
                                            <input type="text" name="content" class="form-control" placeholder="Content*"required>
                                        </div>
                                        <div class="form-group">
                                            <input type="hidden" name="address" id="address"class="form-control" placeholder="Address*"required>
                                        </div>
                                        <div class="modal-footer">
                                             <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                             <button type="submit" class="btn btn-primary" onclick="myFunction()">Save Address</button>
                                        </div>
                             </div>
                        </form>
                    </p>
                    </div>
                    {{!-- <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-primary">Save Address</button>
                    </div> --}}
                    </div>

                </div>
            </div>
            <form name="default" method="post"></form>
            <form name="delete" method="post"></form>
            <!-- Browse Jobs END -->
		</div>
    </div>
<script>
  document.addEventListener('DOMContentLoaded',function(){
    var addressId;
    var defaultbtn = document.getElementById('defaultbtn');
    var defaultform = document.forms['default']
    $('#default').on('show.bs.modal', function (event) {
      var button = $(event.relatedTarget) 
      addressId = button.data('id') 
      
      })
    defaultbtn.onclick = function(){
        defaultform.action = '/profile/address-book/' + addressId;
        defaultform.submit();
    }
  })
</script>
<script>
  document.addEventListener('DOMContentLoaded',function(){
    var addressId;
    var deletebtn = document.getElementById('deletebtn');
    var deleteform = document.forms['delete']
    $('#exampleModal').on('show.bs.modal', function (event) {
      var button = $(event.relatedTarget) 
      addressId = button.data('idd') 
      
      })
    deletebtn.onclick = function(){
        deleteform.action = '/profile/address-book/delete/' + addressId;
        deleteform.submit();
    }
  })
</script>
<script>
    function myFunction() {
        var province = document.getElementById("province").options[document.getElementById("province").selectedIndex ].text
        var district = document.getElementById("district").options[document.getElementById("district").selectedIndex ].text
        var town = document.getElementById("town").options[document.getElementById("town").selectedIndex ].text
        document.getElementById("address").value = province + "-" + district + "-" + town;
    }
</script>


